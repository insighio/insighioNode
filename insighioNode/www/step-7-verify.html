<!DOCTYPE html>

<html>

    <head>
        <meta charset="UTF-8" />
        <title>insigh.io Device</title>
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/spectre-icons.min.css" />
        <link rel="stylesheet" href="css/spectre.min.css" />
    </head>

    <body class="body-custom">

        <img src="img/logo.png" class="img-responsive img-center">

        <div class="panel panel-custom">
          <div class="panel-header">
            <div class="panel-title text-center">Verify and continue</div>
          </div>

          <div class="panel-nav">
            <ul class="step">
              <li class="step-item"><a>Login</a></li>
              <li class="step-item"><a>Select Network</a></li>
              <li class="step-item active"><a>Network Params</a></li>
              <li class="step-item"><a>API Keys</a></li>
              <li class="step-item"><a>Measurements</a></li>
              <li class="step-item"><a>Timing</a></li>
              <li class="step-item"><a>Verify</a></li>
            </ul>
          </div>

          <div class="panel-body">
            <br />
            <hr />
            <br />
            <div class="empty">
              <div class="empty-icon">
                <i class="icon icon-2x icon-download"></i>
              </div>
              <p class="empty-title h5">Configuration Ready</p>
              <p class="empty-subtitle">The configuration is ready to be applied. By pressing the <span class="text-bold">Finish</span> button the device will reboot and start operating with the desired settings.</p>
              <div class="empty-action">
                <button class="btn btn-primary" id="back-button" onclick="goBack()">Back</button>
                <button class="btn btn-primary" id="save-button" onclick="storeAndReboot()">Finish</button>
              </div>
            </div>
          </div>
      </div>
      <script src="js.cookie.min.js"></script>
      <script src="utils.js"></script>
      <script>
      function storeAndReboot() {
        document.getElementById('save-button').disabled = true
        var config = Cookies.get()
        var params = ""

        for (let key in config) {
           if (config.hasOwnProperty(key)) {
              params += (key + "=" + config[key] + "&")
           }
        }
        if(params !== "")
          params = params.slice(0, -1)

        for (let key in config) {
          Cookies.remove(key)
        }

        location.href = "step-8-apply.pyhtml?" + params
      }
      </script>
    </body>

</html>
